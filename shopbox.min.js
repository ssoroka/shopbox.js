(function(){var c;c=function(){function b(){}b.box=null;b.template='    <div class="shopbox" style="display: none;">      <div class="shopbox-main">\t      <div class="shopbox-inner">      \t\t<a class="shopbox-close-button" href="#">x</a>      \t\t<div class="shopbox-content"></div>\t      </div>\t    </div>    </div>  ';b.show=function(){$(".shopbox").show();return setTimeout(function(){return $(".shopbox").addClass("shopbox-visible")},0)};b.init=function(){if(!$(".shopbox").length>0)return $("body").prepend(this.template),
$(".shopbox-close-button").click(function(a){a.preventDefault();return b.hide()})};b.hide=function(){$(".shopbox").removeClass("shopbox-visible");return $(".shopbox").transitionEnd(function(){return $(".shopbox").hide()})};b.setContent=function(a){return $(".shopbox .shopbox-content").html(a)};b.getContent=function(a,b,c){a===void 0&&(a=c.attr("href"));switch(b.type||this.typeFromUrl(a)){case "image":return'<img src="'+a+'" />';case "iframe":return'<iframe src="'+a+'"></iframe>';default:return a}};
b.typeFromUrl=function(a){return["jpg","jpeg","png","bmp","gif"].indexOf(a.split(".").pop().toLowerCase())>=0?"image":a.match(/^https?\:\/\/\S+$/)?"iframe":"content"};return b}();jQuery.fn.shopbox=function(b,a){var d;a==null&&(a={});d=this;c.init();return d.click(function(e){e.preventDefault();c.setContent(c.getContent(b,a,d));return c.show()})};jQuery.fn.transitionEnd=function(b){return this.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",b)}}).call(this);
