(function(){var c;c=function(){function b(){}b.box=null;b.template='    <div class="shopbox" style="display: none;">      <div class="shopbox-main">        <div class="shopbox-inner">          <a class="shopbox-close-button" href="#">x</a>          <div class="shopbox-content"></div>        </div>      </div>    </div>  ';b.show=function(){$(".shopbox").show();return setTimeout(function(){return $(".shopbox").addClass("shopbox-visible")},0)};b.init=function(){if(!$(".shopbox").length>0)return $("body").prepend(this.template),
$(".shopbox-close-button").click(b.closeBox),$("body").bind("keydown",function(a){if(a.which===27)return b.closeBox()}),$(".shopbox").bind("click",function(a){if(a.target===this)return b.closeBox()})};b.closeBox=function(a){a&&a.preventDefault();return b.hide()};b.hide=function(){if($(".shopbox").hasClass("shopbox-visible"))return $(".shopbox").removeClass("shopbox-visible"),$(".shopbox").transitionEnd(function(){return $(".shopbox").hide()})};b.setContent=function(a){$(".shopbox .shopbox-content").html(a);
return a.match(/^\<img /)?this.setTypeStyle("image"):a.match(/^\<iframe /)?this.setTypeStyle("iframe"):this.setTypeStyle("content")};b.setTypeStyle=function(a){return $(".shopbox").removeClass("content image iframe").addClass(a)};b.getContent=function(a,b,c){a===void 0&&(a=c.attr("href"));switch(b.type||this.typeFromUrl(a)){case "image":return'<img src="'+a+'" />';case "iframe":return'<iframe src="'+a+'"></iframe>';default:return a}};b.typeFromUrl=function(a){return["jpg","jpeg","png","bmp","gif"].indexOf(a.split(".").pop().toLowerCase())>=
0?"image":a.match(/^https?\:\/\/\S+$/)?"iframe":"content"};return b}();jQuery.fn.shopbox=function(b,a){var d;a==null&&(a={});d=this;c.init();return d.click(function(e){e.preventDefault();c.setContent(c.getContent(b,a,d));return c.show()})};jQuery.fn.transitionEnd=function(b){return this.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",b)}}).call(this);
